<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<div id="root">
    <p>111</p>
</div>
<!-- https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/ -->
<style>
    div {
        padding: 5px;
        margin: 2px;
        border: 1px solid orange;
    }
</style>

<body>
    <script src="./babel.min.js"></script>
    <script src='./react.js'></script>
    <script src='./react-dom.js'></script>
    <!-- <script src='./App.js'></script> -->
    <!-- <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script> -->
    <script type="text/babel">
        class BB extends React.Component {

            render() {
                return <div >
                    BB
                    <p>BB</p>
                </div>
            }

        }


        class App extends React.Component {
            constructor(props) {
                super(props)
                this.state = {
                    hello: "888888",
                    go: "222",
                }
            }

            a_getSnapshotBeforeUpdate(a, b) {
                console.log('-________-getSnapshotBeforeUpdate--', a, b)
            }

            componentWillMount() {
                console.log("componentWillMount")
            }

            componentDidMount() {
                console.log("componentDidMount")
            }

            setHello() {
                this.setState({
                    hello: "改变1",
                    go: "改变ok",
                })

                console.log("000199191")
                this.setState({
                    hello: "改变2"
                })

                console.log("000199191")
                this.setState({
                    hello: "改变3"
                })
            }

            selectAction() {
                setTimeout(() => {
                    this.setState({
                        go: "改变1",
                    })
                    alert(1)
                }, 0)

                setTimeout(() => {
                    this.setState({
                        go: "改变2",
                    })
                    alert(2)
                }, 0)

                setTimeout(() => {
                    this.setState({
                        go: "改变3",
                    })
                    alert(3)
                }, 0)
                /*  this.setState({
                     go: "改变1",
                 })
                 this.setState({
                     go: "改变2",
                 })
                 this.setState({
                     go: "改变3",
                 }) */
            }

            clickDom() {
                alert(3)
                this.state.hello = "强制更新"
                this.forceUpdate()
            }

            render() {
                console.log(this)

                console.log(<div>{this.state.hello}</div>)
                return (
                    <div index={"链条6"} >
                        <div index={"链条5"}>
                            <div index={"链条3"}>
                                11
                                <div index={"链条1"} style={{ color: "red" }} onClick={this.clickDom.bind(this)}  >{this.state.hello}</div>
                                <div index={"链条2"} >{this.state.go}</div>
                                <button onClick={this.setHello.bind(this)} >click</button>
                                <select name="" id="" onChange={this.selectAction.bind(this)}>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                </select>
                            </div>
                            <BB />
                            <div index={"链条4"} />
                        </div>
                    </div>
                )
            }
        }
        console.log(React.createElement("span", {}, "hello react"))

        /*  ReactDOM.render(
             <App />,
             document.getElementById('root')
         ); */
        console.log(document.getElementById('root')._reactRootContainer)
        class NewApp extends React.Component {
            constructor(props) {
                super(props)
                this.state = {
                    title: "NewApp"
                }
            }
            getDerivedStateFromProps() {
                console.log("getDerivedStateFromProps")
            }

            shouldComponentUpdate() {
                console.log("shouldComponentUpdate")
                return true
            }
            clickButton() {
                this.setState({
                    title: "NewApp-change"
                })
            }
            render() {
                console.log("render")
                return (<div>
                    <p>{this.state.title}</p>
                    <p>xxxxiiiixxxxx</p>
                    <FiberExample />
                    <button onClick={this.clickButton.bind(this)}>go</button>
                </div>)
            }

            getSnapshotBeforeUpdate(...a) {
                console.log("getSnapshotBeforeUpdate")
                console.log(a)
                return a
            }
            componentDidMount() {
                console.log("componentDidMount")
                this.setState({
                    title: "NewApp-didMount"
                })

            }
            componentDidUpdate() {

                console.log("componentDidUpdate")

            }
        }

        class FiberExample extends React.Component {
            constructor(props) {
                super(props);
                this.state = {
                    index1: 1,
                    index2: 2,
                    index3: 3,
                    index4: 4,
                }
            }

            go() {
                this.setState({
                    index1: 1.1,
                    index2: 2.1,
                    index3: 3.1,
                    index4: 4.1,

                })

                setTimeout(() => {
                    console.log("setState完毕")
                    console.log(document.getElementById('root')._reactRootContainer)
                }, 1000);

            }

            render() {
                return (
                    <div index={1111}>
                        <div index={22222} onClick={this.go.bind(this)} >{this.state.index1}</div>
                        {this.state.index1 === 1 && <div>gogo</div>}
                    </div>
                )

            }
        }
        ReactDOM.render(
            <FiberExample />,
            document.getElementById('root')
        );

        console.log("render完毕")
        console.log(document.getElementById('root')._reactRootContainer)
    </script>
</body>

</html>